(function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},t=window.Circles=function(e){this._el=document.getElementById(e.id);if(null!==this._el){this._radius=e.radius||10;this._duration=void 0===e.duration?500:e.duration;this._value=0;this._maxValue=e.maxValue||100;this._text=void 0===e.text?function(e){return this.htmlifyNumber(e)}:e.text;this._strokeWidth=e.width||10;this._colors=e.colors||["#EEE","#F00"];this._textContainer=this._wrapContainer=this._movingPath=this._svg=null;this._wrpClass=e.wrpClass||"circles-wrp";this._textClass=e.textClass||"circles-text";var t=Math.PI/180*270;this._start=-Math.PI/180*90;this._startPrecise=this._precise(this._start);this._circ=t-this._start;this._generate().update(e.value||0)}};t.prototype={VERSION:"0.0.5",_generate:function(){this._svgSize=2*this._radius;this._radiusAdjusted=this._radius-this._strokeWidth/2;this._generateSvg()._generateText()._generateWrapper();this._el.innerHTML="";this._el.appendChild(this._wrapContainer);return this},_setPercentage:function(e){this._movingPath.setAttribute("d",this._calculatePath(e,!0));this._textContainer.innerHTML=this._getText(this.getValueFromPercent(e))},_generateWrapper:function(){this._wrapContainer=document.createElement("div");this._wrapContainer.className=this._wrpClass;this._wrapContainer.style.position="relative";this._wrapContainer.style.display="inline-block";this._wrapContainer.appendChild(this._svg);this._wrapContainer.appendChild(this._textContainer);return this},_generateText:function(){this._textContainer=document.createElement("div");this._textContainer.className=this._textClass;var e={position:"absolute",top:0,left:0,textAlign:"center",width:"100%",fontSize:.7*this._radius+"px",height:this._svgSize+"px",lineHeight:this._svgSize+"px"},t;for(t in e)this._textContainer.style[t]=e[t];this._textContainer.innerHTML=this._getText(0);return this},_getText:function(e){if(!this._text)return"";void 0===e&&(e=this._value);e=parseFloat(e.toFixed(2));return"function"===typeof this._text?this._text.call(this,e):this._text},_generateSvg:function(){this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg");this._svg.setAttribute("width",this._svgSize);this._svg.setAttribute("height",this._svgSize);this._generatePath(100,!1,this._colors[0])._generatePath(1,!0,this._colors[1]);this._movingPath=this._svg.getElementsByTagName("path")[1];return this},_generatePath:function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("fill","transparent");r.setAttribute("stroke",n);r.setAttribute("stroke-linecap","round");r.setAttribute("stroke-width",this._strokeWidth);r.setAttribute("d",this._calculatePath(e,t));this._svg.appendChild(r);return this},_calculatePath:function(e,t){var n=this._precise(this._start+e/100*this._circ);return this._arc(n,t)},_arc:function(e,t){var n=e-.001,r=e-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,r,1,this._radius+this._radiusAdjusted*Math.cos(n),this._radius+this._radiusAdjusted*Math.sin(n),t?"":"Z"].join(" ")},_precise:function(e){return Math.round(1e3*e)/1e3},htmlifyNumber:function(e,t,n){t=t||"circles-integer";n=n||"circles-decimals";e=(e+"").split(".");t='<span class="'+t+'">'+e[0]+"</span>";1<e.length&&(t+='.<span class="'+n+'">'+e[1].substring(0,2)+"</span>");return t},updateRadius:function(e){this._radius=e;return this._generate().update(!0)},updateWidth:function(e){this._strokeWidth=e;return this._generate().update(!0)},updateColors:function(e){this._colors=e;var t=this._svg.getElementsByTagName("path");t[0].setAttribute("stroke",e[0]);t[1].setAttribute("stroke",e[1]);return this},getPercent:function(){return 100*this._value/this._maxValue},getValueFromPercent:function(e){return this._maxValue*e/100},getValue:function(){return this._value},getMaxValue:function(){return this._maxValue},update:function(t,n){if(!0===t)return this._setPercentage(this.getPercent()),this;if(this._value==t||isNaN(t))return this;void 0===n&&(n=this._duration);var r=this,i=r.getPercent(),s=1,o,u,a,f;this._value=Math.min(this._maxValue,Math.max(0,t));if(!n)return this._setPercentage(this.getPercent()),this;o=r.getPercent();u=o>i;s+=o%1;a=Math.floor(Math.abs(o-i)/s);f=n/a;(function c(t){i=u?i+s:i-s;if(u&&i>=o||!u&&i<=o)e(function(){r._setPercentage(o)});else{e(function(){r._setPercentage(i)});var n=Date.now();t=n-t;t>=f?c(n):setTimeout(function(){c(Date.now())},f-t)}})(Date.now());return this}};t.create=function(e){return new t(e)}})()